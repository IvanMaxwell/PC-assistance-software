<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PC Automation Framework</title>
    <meta name="description" content="Multi-LLM orchestration framework for PC assistance ‚Äî Dashboard">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>

<!-- ‚îÄ‚îÄ‚îÄ Sidebar Navigation ‚îÄ‚îÄ‚îÄ -->
<nav class="sidebar" id="sidebar">
    <div class="sidebar-brand">
        <div class="brand-icon">‚ö°</div>
        <span class="brand-text">PC Auto</span>
    </div>
    <div class="nav-links">
        <button class="nav-btn active" data-page="chat" id="nav-chat">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
            <span>Chat</span>
        </button>
        <button class="nav-btn" data-page="execution" id="nav-execution">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
            <span>Execution</span>
        </button>
        <button class="nav-btn" data-page="tools" id="nav-tools">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>
            <span>Tools</span>
        </button>
        <button class="nav-btn" data-page="history" id="nav-history">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
            <span>History</span>
        </button>
    </div>
    <div class="sidebar-footer">
        <div class="status-dot" id="status-dot"></div>
        <span class="status-text" id="status-text">Connecting‚Ä¶</span>
    </div>
</nav>

<!-- ‚îÄ‚îÄ‚îÄ Main Content ‚îÄ‚îÄ‚îÄ -->
<main class="main-content">

    <!-- ========== PAGE: CHAT ========== -->
    <section class="page active" id="page-chat">
        <header class="page-header">
            <h1>Chat Interface</h1>
            <div class="header-badges">
                <span class="badge badge-cyan" id="badge-cm">CM Agent</span>
                <span class="badge badge-amber" id="badge-cs">CS Agent</span>
                <span class="badge badge-green" id="badge-tools-count">0 tools</span>
            </div>
        </header>

        <!-- System Status Cards -->
        <div class="status-cards" id="status-cards">
            <div class="stat-card">
                <div class="stat-icon cpu-icon">‚öôÔ∏è</div>
                <div class="stat-info">
                    <span class="stat-label">CPU</span>
                    <span class="stat-value" id="stat-cpu">‚Äî</span>
                </div>
                <div class="stat-bar"><div class="stat-bar-fill cpu-bar" id="bar-cpu"></div></div>
            </div>
            <div class="stat-card">
                <div class="stat-icon ram-icon">üß†</div>
                <div class="stat-info">
                    <span class="stat-label">RAM</span>
                    <span class="stat-value" id="stat-ram">‚Äî</span>
                </div>
                <div class="stat-bar"><div class="stat-bar-fill ram-bar" id="bar-ram"></div></div>
            </div>
            <div class="stat-card">
                <div class="stat-icon disk-icon">üíæ</div>
                <div class="stat-info">
                    <span class="stat-label">Disk</span>
                    <span class="stat-value" id="stat-disk">‚Äî</span>
                </div>
                <div class="stat-bar"><div class="stat-bar-fill disk-bar" id="bar-disk"></div></div>
            </div>
        </div>

        <!-- Chat Messages -->
        <div class="chat-container" id="chat-container">
            <div class="chat-messages" id="chat-messages">
                <div class="message bot-message">
                    <div class="msg-avatar">‚ö°</div>
                    <div class="msg-body">
                        <div class="msg-text">Welcome to PC Automation Framework. Type a command below ‚Äî I'll plan, validate, and execute it safely.</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chat Input -->
        <div class="chat-input-area">
            <input type="text" id="chat-input" placeholder="e.g. Check my CPU usage, Organize my Downloads‚Ä¶" autocomplete="off">
            <button class="send-btn" id="send-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
            </button>
        </div>
    </section>

    <!-- ========== PAGE: EXECUTION VIEWER ========== -->
    <section class="page" id="page-execution">
        <header class="page-header">
            <h1>Execution Viewer</h1>
            <div class="header-badges">
                <span class="badge badge-dim" id="exec-status-badge">No execution</span>
            </div>
        </header>

        <!-- Empty State -->
        <div class="empty-state" id="exec-empty">
            <div class="empty-icon">üöÄ</div>
            <p>No execution yet. Send a command from the <strong>Chat</strong> page to see the full pipeline here.</p>
        </div>

        <!-- Execution Flow (visible during execution) -->
        <div class="exec-flow hidden" id="exec-flow">
            <!-- FSM State Timeline -->
            <div class="exec-section">
                <h2 class="section-title">FSM State Flow</h2>
                <div class="fsm-timeline" id="fsm-timeline"></div>
            </div>

            <!-- CM Agent Response -->
            <div class="exec-section" id="cm-section" style="display:none">
                <h2 class="section-title">üí¨ CM Agent Response</h2>
                <div class="glass-card">
                    <p class="cm-reply" id="cm-reply"></p>
                    <p class="cm-explanation" id="cm-explanation"></p>
                </div>
            </div>

            <!-- Semantic Router -->
            <div class="exec-section" id="router-section" style="display:none">
                <h2 class="section-title">üîÄ Semantic Router</h2>
                <div class="glass-card" id="router-card"></div>
            </div>

            <!-- Plan -->
            <div class="exec-section" id="plan-section" style="display:none">
                <h2 class="section-title">üìã Execution Plan</h2>
                <div class="plan-table-wrap" id="plan-table-wrap"></div>
            </div>

            <!-- Confidence -->
            <div class="exec-section" id="confidence-section" style="display:none">
                <h2 class="section-title">üìä Confidence Score</h2>
                <div class="confidence-bar-wrap">
                    <div class="confidence-bar">
                        <div class="confidence-fill" id="confidence-fill"></div>
                    </div>
                    <span class="confidence-label" id="confidence-label">‚Äî</span>
                </div>
            </div>

            <!-- CS Agent Risk Assessment -->
            <div class="exec-section" id="risk-section" style="display:none">
                <h2 class="section-title">üõ°Ô∏è CS Agent Risk Assessment</h2>
                <div class="glass-card" id="risk-card"></div>
            </div>

            <!-- Step Results -->
            <div class="exec-section" id="steps-section" style="display:none">
                <h2 class="section-title">‚öôÔ∏è Step Execution</h2>
                <div id="step-results"></div>
            </div>

            <!-- Loading -->
            <div class="exec-loading" id="exec-loading" style="display:none">
                <div class="spinner"></div>
                <p>Executing pipeline‚Ä¶</p>
            </div>
        </div>

        <!-- Result Summary (visible after execution, replaces the flow) -->
        <div class="result-summary hidden" id="result-summary">
            <div class="result-header">
                <div class="result-icon" id="result-icon">‚úÖ</div>
                <h2 id="result-title">Execution Complete</h2>
            </div>
            <div class="glass-card result-card">
                <h3>Command</h3>
                <p class="mono" id="result-command"></p>
            </div>
            <div class="glass-card result-card">
                <h3>AI Summary</h3>
                <p id="result-summary-text"></p>
            </div>
            <div class="result-meta" id="result-meta"></div>
            <div class="glass-card result-card" id="result-data-card">
                <h3>Detailed Results</h3>
                <pre id="result-data"></pre>
            </div>
            <div class="result-actions">
                <button class="btn btn-outline" id="btn-show-flow">View Pipeline Details</button>
                <button class="btn btn-primary" id="btn-new-cmd" data-goto="chat">New Command</button>
            </div>
        </div>
    </section>

    <!-- ========== PAGE: TOOLS ========== -->
    <section class="page" id="page-tools">
        <header class="page-header">
            <h1>Tools Browser</h1>
            <div class="header-actions">
                <input type="text" class="search-input" id="tool-search" placeholder="Search tools‚Ä¶">
                <select class="filter-select" id="tool-filter">
                    <option value="all">All Categories</option>
                </select>
            </div>
        </header>

        <!-- Semantic Similarity Block -->
        <div class="similarity-block" id="similarity-block">
            <h3>üîç Semantic Similarity</h3>
            <p class="dim">Type a natural language query to see which tools match best.</p>
            <div class="sim-input-row">
                <input type="text" id="sim-query" placeholder="e.g. show me my cpu stats">
                <button class="btn btn-primary btn-sm" id="sim-btn">Match</button>
            </div>
            <div class="sim-results" id="sim-results"></div>
        </div>

        <div class="tools-grid" id="tools-grid"></div>
    </section>

    <!-- ========== PAGE: HISTORY ========== -->
    <section class="page" id="page-history">
        <header class="page-header">
            <h1>Execution History</h1>
            <button class="btn btn-outline btn-sm" id="refresh-history">Refresh</button>
        </header>
        <div class="history-list" id="history-list">
            <p class="dim">No history yet.</p>
        </div>
    </section>

</main>

<script src="/static/app.js"></script>
</body>
</html>
